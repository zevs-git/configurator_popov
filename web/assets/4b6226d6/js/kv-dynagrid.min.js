/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.0.0
 *
 * JQuery Plugin for yii2-dynagrid.
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2014, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(i){var n=function(n,t){return null===n||void 0===n||n==[]||""===n||t&&""===i.trim(n)},t=function(n,t){this.$element=i(n),this.submitMessage=t.submitMessage,this.init(),this.listen()};t.prototype={constructor:t,init:function(){var i=this;i.$form=i.$element.closest("form");var n=i.$form;i.$visibleEl=n.find(".sortable-visible"),i.$hiddenEl=n.find(".sortable-hidden"),i.$visibleKeys=n.find('input[name="visibleKeys"]'),i.$btnSubmit=n.find(".dynagrid-submit"),i.$btnReset=n.find(".dynagrid-reset"),i.$formContainer=i.$form.parent(),i.setColumnKeys(),i.visibleContent=i.$visibleEl.html(),i.hiddenContent=i.$hiddenEl.html(),i.visibleSortableOptions=window[i.$visibleEl.data("pluginOptions")],i.hiddenSortableOptions=window[i.$hiddenEl.data("pluginOptions")]},listen:function(){var t=this;t.$btnSubmit.on("click",function(){t.setColumnKeys(),t.$visibleKeys.val(t.visibleKeys),t.$form.hide(),t.$formContainer.prepend(t.submitMessage),t.$form.serialize(),setTimeout(function(){t.$form.submit()},1e3)}),t.$btnReset.on("click",function(){t.$visibleEl.html(t.visibleContent),t.$hiddenEl.html(t.hiddenContent),t.setColumnKeys(),t.$formContainer.find(".dynagrid-submit-message").remove(),t.$visibleEl.sortable(t.visibleSortableOptions),t.$hiddenEl.sortable(t.hiddenSortableOptions)}),t.$form.on("submit",function(){var t=i(this),e="";t.find(".help-block").each(function(){return e=i(this).text(),n(e.trim())?void 0:(t.show(),void t.parent().find(".dynagrid-submit-message").remove())})})},setColumnKeys:function(){var n=this;n.visibleKeys=n.$visibleEl.find("li").map(function(n,t){return i(t).attr("id")}).get().join(",")}},i.fn.dynagrid=function(n){var e=Array.apply(null,arguments);return e.shift(),this.each(function(){var s=i(this),o=s.data("dynagrid"),l="object"==typeof n&&n;o||s.data("dynagrid",o=new t(this,i.extend({},i.fn.dynagrid.defaults,l,i(this).data()))),"string"==typeof n&&o[n].apply(o,e)})},i.fn.dynagrid.defaults={submitMessage:"Applying configuration &hellip;"}}(jQuery);